---
import type { ComponentProps } from "astro/types";
import { InvalidAnchorFormatError } from "../../../utils/exceptions";
import Button from "../../atoms/button/button.astro";

type Props = Omit<
  ComponentProps<typeof Button<"a">>,
  "as" | "href" | "isExternal" | "kind"
> & {
  anchor: `#${string}`;
};

const { anchor, class: className, slot, ...attrs } = Astro.props;

if (!anchor.startsWith("#")) {
  throw new InvalidAnchorFormatError("anchor", anchor);
}
---

<Button
  {...attrs}
  as="a"
  class:list={["sr-only", "skip-link", className]}
  href={anchor}
  kind="secondary"><slot /></Button
>

<style>
  .skip-link {
    position: fixed;
    top: var(--spacing-sm);
    left: var(--spacing-sm);
    z-index: 99;
    user-select: none;
    box-shadow: var(--shadow-raised-to-top-left);

    &:focus {
      box-shadow: var(--shadow-floating-to-top-left);
    }
  }
</style>
