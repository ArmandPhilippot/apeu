---
import type { ComponentProps } from "astro/types";
import { Icon } from "astro-icon/components";
import { useI18n } from "../../../services/i18n";
import type { Author } from "../../../types/data";
import type { HeadingLvl } from "../../../types/tokens";
import Button from "../../atoms/button/button.astro";
import Card from "../../molecules/card/card.astro";
import SocialLinks from "../../molecules/social-links/social-links.astro";

type Props = ComponentProps<typeof Card> &
  Pick<ComponentProps<typeof SocialLinks>, "addRelMe"> &
  Pick<Author, "socialMedia"> & {
    contactPageRoute: string;
    heading: string;
    headingLvl?: HeadingLvl | undefined;
  };

const {
  addRelMe = false,
  class: className,
  contactPageRoute,
  heading,
  headingLvl: Heading = "h2",
  slot,
  socialMedia,
  ...attrs
} = Astro.props;
const { translate } = useI18n(Astro.currentLocale);
---

<Card {...attrs} class:list={[className, "contact-card"]}>
  <Heading slot="heading">{heading}</Heading>
  <p>{translate("card.contact.cta.intro")}</p>
  <Button as="a" href={contactPageRoute}>
    <Icon aria-hidden="true" name="contact" size={24} />
    {translate("cta.contact.me")}
  </Button>
  {
    socialMedia ? (
      <Fragment>
        <p>{translate("card.contact.social.links.intro")}</p>
        <SocialLinks addRelMe={addRelMe} hideLabels links={socialMedia} />
      </Fragment>
    ) : null
  }
</Card>
