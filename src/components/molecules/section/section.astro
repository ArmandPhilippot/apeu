---
import type { HTMLAttributes } from "astro/types";

type Props = HTMLAttributes<"section">;

const { class: className, slot, ...attrs } = Astro.props;
---

<section {...attrs} class:list={["section", className]}>
  <header class="section-header">
    <slot name="heading" />
    {
      Astro.slots.has("cta") ? (
        <div class="section-cta">
          <slot name="cta" />
        </div>
      ) : null
    }
  </header>
  <slot />
</section>

<style>
  @layer components {
    .section {
      margin-block-end: var(--gutter);

      &:not(:first-child) {
        margin-block-start: var(--gutter);
      }
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm) var(--spacing-md);
      margin-block-end: var(--gutter);
      padding: var(--gutter);
      background: var(--color-regular);
      border-block: var(--border-size-sm) solid var(--color-border);
      box-shadow: var(--shadow-raised-to-top-center);

      @media (--prose) {
        border-inline: var(--border-size-sm) solid var(--color-border);
        border-radius: var(--border-radii-md);
        box-shadow: var(--shadow-raised-to-top-left);
      }
    }

    .section-cta {
      display: flex;
      flex-flow: row wrap;
      align-items: center;
      gap: var(--spacing-sm);
      margin-inline-start: auto;
    }
  }
</style>
